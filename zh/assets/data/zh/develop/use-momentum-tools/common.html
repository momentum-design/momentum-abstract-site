<h1 id="momentum-constructor-common">momentum-constructor-common</h1>
<p>momentum-constructor-common是momentum-constructor的一个公用模块</p>
<h2 id="安装">安装</h2>

<pre class='hljs'><code class='hljs'>npm i momentum-<span class="hljs-function"><span class="hljs-keyword">constructor</span>-<span class="hljs-title">common</span></span></code></pre>
<h2 id="用法">用法</h2>
<p>你可以去<code class='hljs'>./test</code>查看详细使用情况。</p>
<h1 id="mfs">mfs</h1>
<p><code class='hljs'><span class="hljs-attribute">mfs</span></code> 提供文件系统的方法</p>

<pre class='hljs'><code class='hljs'><span class="hljs-keyword">import</span> { mfs } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;momentum-constructor-common&#x27;</span>;</code></pre>
<p>或者</p>

<pre class='hljs'><code class='hljs'><span class="hljs-keyword">const</span> { mfs } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;momentum-constructor-common&#x27;</span>);</code></pre>
<h2 id="path">path</h2>
<p>获取各种元素的路径</p>
<h3 id="参数">参数</h3>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">momentumType</td>
<td align="center">MomentumAbstractType</td>
<td align="left">元素类型</td>
</tr>
</tbody></table>
<h3 id="返回值">返回值</h3>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">string</td>
<td align="left">路径目录</td>
</tr>
</tbody></table>
<h3 id="usage">usage</h3>
<ul>
<li>读取 momentum-abstract/color 路径</li>
</ul>

<pre class='hljs'><code class='hljs'>const pathString <span class="hljs-operator">=</span> mfs.path(MomentumAbstractType.color)<span class="hljs-comment">;</span></code></pre>
<ul>
<li>读取 momentum-abstract/icon 路径</li>
</ul>

<pre class='hljs'><code class='hljs'>const pathString <span class="hljs-operator">=</span> mfs.path(MomentumAbstractType.icon)<span class="hljs-comment">;</span></code></pre>
<h2 id="list">list</h2>
<p>获取某个元素的文件列表</p>
<h3 id="参数-1">参数</h3>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">momentumType</td>
<td align="center">MomentumAbstractType</td>
<td align="left">元素类型</td>
</tr>
<tr>
<td align="left">filter</td>
<td align="center">IFileFilter</td>
<td align="left">黑名单白名单</td>
</tr>
</tbody></table>
<h3 id="返回值-1">返回值</h3>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">string[]</td>
<td align="left">文件名列表</td>
</tr>
</tbody></table>
<h3 id="用法-1">用法</h3>
<ul>
<li>读取 momentum-abstract/color 列表</li>
</ul>

<pre class='hljs'><code class='hljs'>const files <span class="hljs-operator">=</span> mfs.list(MomentumAbstractType.color)<span class="hljs-comment">;</span></code></pre>
<ul>
<li>使用过滤器读取 momentum-abstract/color 列表</li>
</ul>

<pre class='hljs'><code class='hljs'><span class="hljs-built_in">let</span> files = mfs.list(MomentumAbstractType.color, {
    whitelist: [/.json$/i]
});</code></pre>
<h2 id="read">read</h2>
<p>获取momentum-abstract的文件</p>
<h3 id="参数-2">参数</h3>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">momentumType</td>
<td align="center">MomentumAbstractType</td>
<td align="left">元素类型</td>
</tr>
<tr>
<td align="left">filter</td>
<td align="center">IFileFilter</td>
<td align="left">黑名单白名单</td>
</tr>
</tbody></table>
<h3 id="返回值-2">返回值</h3>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Record&lt;string, IFile&gt;</td>
<td align="left">包含文件哈希对象</td>
</tr>
</tbody></table>
<h3 id="用法-2">用法</h3>
<ul>
<li>读取 momentum-abstract/color 下所有文件</li>
</ul>

<pre class='hljs'><code class='hljs'><span class="hljs-built_in">let</span> files = mfs.<span class="hljs-built_in">read</span>(MomentumAbstractType.<span class="hljs-built_in">color</span>);</code></pre>
<h1 id="mcommon">mcommon</h1>
<p><code class='hljs'><span class="hljs-attribute">mcommon</span></code> 提供一些公共方法</p>

<pre class='hljs'><code class='hljs'><span class="hljs-keyword">import</span> { mcommon } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;momentum-constructor-common&#x27;</span>;</code></pre>
<p>或</p>

<pre class='hljs'><code class='hljs'><span class="hljs-keyword">const</span> { mcommon } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;momentum-constructor-common&#x27;</span>);</code></pre>
<h2 id="getregfromnames">getRegFromNames</h2>
<p>Create a regular expression using an array of filenames.</p>
<h3 id="参数-3">参数</h3>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">fileNameList</td>
<td align="center">string[]</td>
<td align="left">文件名列表</td>
</tr>
</tbody></table>
<h3 id="返回值-3">返回值</h3>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">RegExp</td>
<td align="left">正则表达式</td>
</tr>
</tbody></table>
<h2 id="getregfromnamessafe">getRegFromNamesSafe</h2>
<p>getRegFromNamesSafe 和 getRegFromNames的参数以及返回类型相同。由于RegExp有长度限制, 在getRegFromNamesSafe我们会做长度检测。</p>
<h1 id="mconvert">mconvert</h1>
<p><code class='hljs'><span class="hljs-attribute">mconvert</span></code> 用于重命名元素的文件名和token名</p>

<pre class='hljs'><code class='hljs'><span class="hljs-keyword">import</span> { mconvert } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;momentum-constructor-common&#x27;</span>;</code></pre>
<p>或</p>

<pre class='hljs'><code class='hljs'><span class="hljs-keyword">const</span> { mconvert } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;momentum-constructor-common&#x27;</span>);</code></pre>
<h2 id="renamefile">renameFile</h2>
<p>重命名文件</p>
<h3 id="参数-4">参数</h3>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">mometnumFiles</td>
<td align="center">Record&lt;string, IFile&gt;</td>
<td align="left">mfs.read 回返的内容</td>
</tr>
<tr>
<td align="left">replacement</td>
<td align="center">IReplacementItem</td>
<td align="left">替换内容</td>
</tr>
</tbody></table>
<h3 id="返回值-4">返回值</h3>
<table>
<thead>
<tr>
<th align="center">type</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Record&lt;string, IFile&gt;</td>
<td align="left">新的类似mfs.read 回返的内容</td>
</tr>
</tbody></table>
<h2 id="renametoken">renameToken</h2>
<p>重命名token</p>
<h3 id="参数-5">参数</h3>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">mometnumFiles</td>
<td align="center">Record&lt;string, IFile&gt;</td>
<td align="left">mfs.read 回返的内容</td>
</tr>
<tr>
<td align="left">replacement</td>
<td align="center">IReplacementItem</td>
<td align="left">替换内容</td>
</tr>
<tr>
<td align="left">momentumType</td>
<td align="center">MomentumAbstractType</td>
<td align="left">元素类型</td>
</tr>
</tbody></table>
<h3 id="返回值-5">返回值</h3>
<table>
<thead>
<tr>
<th align="center">type</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Record&lt;string, IFile&gt;</td>
<td align="left">新的类似mfs.read 回返的内容</td>
</tr>
</tbody></table>
<h2 id="flat">flat</h2>
<p>扁平化token的结构</p>
<h3 id="参数-6">参数</h3>
<table>
<thead>
<tr>
<th align="left">名字</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">mometnumFiles</td>
<td align="center">Record&lt;string, IFile&gt;</td>
<td align="left">mfs.read 回返的内容</td>
</tr>
<tr>
<td align="left">momentumType</td>
<td align="center">MomentumAbstractType</td>
<td align="left">元素类型</td>
</tr>
</tbody></table>
<h3 id="返回值-6">返回值</h3>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Record&lt;string, IFile&gt;</td>
<td align="left">新的类似mfs.read 回返的内容</td>
</tr>
</tbody></table>
<h1 id="types">Types</h1>

<pre class='hljs'><code class='hljs'><span class="hljs-keyword">import</span> { MomentumAbstractType } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;momentum-constructor-common&#x27;</span>;</code></pre>
<p>或</p>

<pre class='hljs'><code class='hljs'><span class="hljs-keyword">const</span> { <span class="hljs-title class_">MomentumAbstractType</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;momentum-constructor-common&#x27;</span>);</code></pre>
<h2 id="枚举">枚举</h2>
<h3 id="momentumabstracttype">MomentumAbstractType</h3>
<table>
<thead>
<tr>
<th align="left">名字</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">color</td>
<td align="left">颜色</td>
</tr>
<tr>
<td align="left">font</td>
<td align="left">字体</td>
</tr>
<tr>
<td align="left">illustration</td>
<td align="left">手绘图</td>
</tr>
<tr>
<td align="left">icon</td>
<td align="left">普通图标</td>
</tr>
<tr>
<td align="left">icon-colored</td>
<td align="left">双色图标</td>
</tr>
<tr>
<td align="left">icon-brand</td>
<td align="left">logo图标</td>
</tr>
<tr>
<td align="left">sonic</td>
<td align="left">音效</td>
</tr>
</tbody></table>
<h2 id="interface--type">Interface &amp; Type</h2>
<h3 id="ifile">IFile</h3>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">path</td>
<td align="center">string</td>
<td align="left">完整的文件路径</td>
</tr>
<tr>
<td align="left">content</td>
<td align="center">any</td>
<td align="left">文件内容</td>
</tr>
<tr>
<td align="left">contentCode</td>
<td align="center">?string</td>
<td align="left">编码</td>
</tr>
<tr>
<td align="left">name</td>
<td align="center">string</td>
<td align="left">无扩展名的文件名</td>
</tr>
<tr>
<td align="left">fullName</td>
<td align="center">string</td>
<td align="left">有扩展名的文件名</td>
</tr>
<tr>
<td align="left">extensionName</td>
<td align="center">string</td>
<td align="left">扩展名</td>
</tr>
</tbody></table>
<ul>
<li>rule for reading content</li>
</ul>
<table>
<thead>
<tr>
<th align="left">文件类型</th>
<th align="center">数据类型</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.svg</td>
<td align="center">string</td>
</tr>
<tr>
<td align="left">.json</td>
<td align="center">json ojbect</td>
</tr>
<tr>
<td align="left">default</td>
<td align="center">buffer[]</td>
</tr>
</tbody></table>
<h3 id="ifilefilter">IFileFilter</h3>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">whitelist</td>
<td align="center">RegExp[]</td>
<td align="left">白名单</td>
</tr>
<tr>
<td align="left">blacklist</td>
<td align="center">RegExp[]</td>
<td align="left">黑名单</td>
</tr>
</tbody></table>
<h3 id="ireplacementitem">IReplacementItem</h3>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="center">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pattern</td>
<td align="center">string</td>
<td align="left">RegExp</td>
</tr>
<tr>
<td align="left">words</td>
<td align="center">string</td>
<td align="left">any</td>
</tr>
</tbody></table>
